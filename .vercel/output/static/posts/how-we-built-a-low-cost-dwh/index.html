<!DOCTYPE html><html lang="en"> <head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>How we built a low-cost data warehouse</title><meta name="description" content="Boilerplate built with Astro and Tailwind CSS"><meta name="author" content="Nicolas"><link rel="sitemap" href="/sitemap-index.xml"><link rel="alternate" type="application/rss+xml" href="/rss.xml"><link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üõ†Ô∏è</text></svg>"><link rel="stylesheet" href="/_astro/imprint.CrAVhQ0z.css">
<style>.content pre{background-color:#cdc8ff0d;border-radius:.5rem;font-size:.9rem}.content code{overflow-x:auto}.content [data-rehype-pretty-code-figure] code{padding:0!important}.content pre>code span[data-line]{border-left:.5rem solid transparent;padding:0 .5rem}.content pre>code span:first-of-type{border-top-left-radius:.5rem;border-top-right-radius:.5rem;padding-top:.5rem}.content pre>code span:last-of-type{border-bottom-left-radius:.5rem;border-bottom-right-radius:.5rem;padding-bottom:.5rem}.content pre>code .highlighted{border-left:.5rem solid rgba(209,213,219,.6)!important;background-color:#e5e7eb0d}.content pre>code[data-line-numbers]{counter-reset:line}.content pre>code[data-line-numbers]>span[data-line]:before{counter-increment:line;content:counter(line);display:inline-block;margin-right:2rem;width:1rem;text-align:left;color:#7ca2dfad}.content pre>code>span[data-line]:before{content:"";display:inline-block;width:1rem;text-align:right}.content pre>code[data-line-numbers-max-digits="2"]>span[data-line]:before{width:2rem}.content code[data-line-numbers-max-digits="3"]>span[data-line]:before{width:3rem}
</style><script type="module">localStorage.getItem("dark-mode")==="true"||!("dark-mode"in localStorage)&&window.matchMedia("(prefers-color-scheme: dark)").matches?(localStorage.setItem("dark-mode","true"),document.querySelector("html")?.classList.add("dark")):(localStorage.setItem("dark-mode","false"),document.querySelector("html")?.classList.remove("dark"));const t=document.querySelectorAll(".light-switch");t.length>0&&t.forEach((e,a)=>{localStorage.getItem("dark-mode")==="true"&&(e.checked=!0),e.addEventListener("click",()=>{const{checked:o}=e;t.forEach((c,d)=>{d!==a&&(c.checked=o)}),e.checked?(document.documentElement.classList.add("dark"),localStorage.setItem("dark-mode","true")):(document.documentElement.classList.remove("dark"),localStorage.setItem("dark-mode","false"))})});
</script>
<script>window.va = window.va || function () { (window.vaq = window.vaq || []).push(arguments); };
		var script = document.createElement('script');
		script.defer = true;
		script.src = '/_vercel/insights/script.js';
		var head = document.querySelector('head');
		head.appendChild(script);
	</script></head> <body class="flex min-h-screen flex-col bg-stone-100 font-mono text-gray-950 dark:bg-stone-900 dark:text-white"> <div class="mx-auto w-full max-w-screen-lg px-4 py-6">  <div class="flex justify-between"> <div class="text-3xl font-bold"> <a href="/">üíª <span class="pr-2 text-2xl text-gray-500">&lt;</span>Ricardo<span class="text-orange-600">.</span>Batista<span class="pl-2 text-2xl text-gray-500">/&gt;</span></a> </div> <div class="flex items-center"> <nav> <ul class="hidden flex-row sm:flex"> <li><a href="/tags" class="mr-3 hover:text-orange-600">Tags</a></li> <li><a href="/" class="hover:text-orange-600">Blog</a></li> </ul> </nav> <div class="ml-3 flex flex-col justify-center"> <input type="checkbox" id="light-switch" class="light-switch sr-only"> <label class="tada relative cursor-pointer p-2" for="light-switch"> <svg class="dark:hidden" width="16" height="16" xmlns="http://www.w3.org/2000/svg"> <path class="fill-stone-800" d="M7 0h2v2H7zM12.88 1.637l1.414 1.415-1.415 1.413-1.413-1.414zM14 7h2v2h-2zM12.95 14.433l-1.414-1.413 1.413-1.415 1.415 1.414zM7 14h2v2H7zM2.98 14.364l-1.413-1.415 1.414-1.414 1.414 1.415zM0 7h2v2H0zM3.05 1.706 4.463 3.12 3.05 4.535 1.636 3.12z"></path> <path class="fill-gray-900" d="M8 4C5.8 4 4 5.8 4 8s1.8 4 4 4 4-1.8 4-4-1.8-4-4-4Z"></path> </svg> <svg class="hidden dark:block" width="16" height="16" xmlns="http://www.w3.org/2000/svg"> <path class="fill-slate-400" d="M6.2 1C3.2 1.8 1 4.6 1 7.9 1 11.8 4.2 15 8.1 15c3.3 0 6-2.2 6.9-5.2C9.7 11.2 4.8 6.3 6.2 1Z"></path> <path class="fill-slate-500" d="M12.5 5a.625.625 0 0 1-.625-.625 1.252 1.252 0 0 0-1.25-1.25.625.625 0 1 1 0-1.25 1.252 1.252 0 0 0 1.25-1.25.625.625 0 1 1 1.25 0c.001.69.56 1.249 1.25 1.25a.625.625 0 1 1 0 1.25c-.69.001-1.249.56-1.25 1.25A.625.625 0 0 1 12.5 5Z"></path> </svg> <span class="sr-only">Switch to light / dark version</span> </label> </div> </div> </div>  </div>  <div class="flex-1">  <div class="mx-auto w-full max-w-screen-md"> <div class="mx-auto w-full max-w-screen-lg px-4 py-6">  <div class="flex flex-col items-center"> <p class="px-14 pb-4 pt-6 text-center text-4xl font-bold">How we built a low-cost data warehouse</p> <div class="pb-4"> <div class="flex flex-wrap"> <a href="/tags/tech"><span class="mb-2 mr-2 rounded-xl bg-stone-600 px-3 py-1 text-xs font-bold uppercase text-white hover:bg-stone-500">
#tech </span></a><a href="/tags/CompareEuropeGroup"><span class="mb-2 mr-2 rounded-xl bg-stone-600 px-3 py-1 text-xs font-bold uppercase text-white hover:bg-stone-500">
#CompareEuropeGroup </span></a> </div> </div> <div class="text-sm"> <span>Sat, November 10, 2018</span> - <span>5 min read</span> </div>  </div>  </div> <div class="mx-auto w-full max-w-screen-lg px-4 py-6">  <div class="content prose mt-8 max-w-none text-base leading-8 text-black dark:prose-invert prose-code:rounded-lg prose-code:bg-stone-800 prose-code:p-1 prose-code:text-orange-600 prose-img:rounded-lg prose-img:shadow-xl dark:text-white prose-img:dark:shadow-stone-800"> <p>Here at CompareEuropeGroup we faced a common issue most startups (and even larger companies‚Ä¶) face: accessing your own data. Currently CompareEuropeGroup has ventures in Denmark (<a href="https://www.samlino.dk/">Samlino.dk</a>), Finland (<a href="https://www.vertaaensin.fi/">VertaaEnsin.fi</a>), Belgium (<a href="https://www.topcompare.be/nl">TopCompare.be</a>) and Portugal (<a href="https://www.comparaja.pt/">ComparaJ√°.pt</a>), all of them producing tons of data everyday that should be within reach for management reporting, data analysis and ultimately business decision-making. But data was hard-to-get, scattered across databases and not easily linkable across platforms.</p>
<p>A Business Intelligence team‚Äôs job is ultimately to allow and democratise (some might add ‚Äúevangelise‚Äù) that access to any data. Having this in mind, we set a plan to deliver a fully usable data warehouse in 3 months. Ambitious yes, but feasible within the context of a company that is 4 years old.</p>
<p><img src="/transformation.webp" alt="Typical transformation diagram in a big corporate" title="(photo credit: DellEMC on Visualhunt / CC BY-SA)"></p>
<p>CompareEuropeGroup benefits from having a reduced number of data sources, which might be common to most startups: marketing platforms (e.g., Google AdWords, Facebook, Bing), website interaction data (e.g., Google Analytics), conversion tracking systems (e.g., DoubleClick Campaign Manager), CRM systems and call-centre diallers.</p>
<p>Let‚Äôs then start with the simplest concept in a data warehouse (DWH): extract, transform and load (ETL). In building a DWH, that‚Äôs pretty much what you need to account for: how are you going to extract the data, in which way do you transform it, and finally how do you load and visualize it.</p>
<p><img src="/etl-diagram.webp" alt="Stealing this beautiful diagram from panoply.io" title="Stealing this beautiful diagram from panoply.io"></p>
<h2 id="extract-your-data">Extract your data</h2>
<p>In the old times building a DWH meant having your own on-premise database and accessing all data sources by ODBC drivers. Today you can choose any cloud/off-premise database (still keeping your data safeguarded, redundant and within privacy policies), avoiding all the internal tech hassle of building and maintaining it. Plus, ODBC connectors are long due if you‚Äôre willing to spend some bucks on 3rd-party integrators, some of which will do the integration for free.</p>
<p>At CompareEuropeGroup we decided to choose Google BigQuery as our DWH solution, for the following reasons: i) outstanding integration with Google products; ii) one of cheapest options in terms of processing and storage; iii) recent developments on out-of-the-shelf Machine Learning capabilities. Downsides to BigQuery (for now) are the relatively low maturity of the products (vs. Amazon Redshift, for instance) and lack of dedicated account management ‚Äî but I do see some changes in the latter recently. Considering a reasonable consumption of data resources, you can keep your DWH costs under $500/month (already including data integrations).</p>
<p>Additionally, you need to consider the integrations. The majority of the cloud DWH solutions offer direct integrations with Google Analytics, AdWords, Facebook, etc. Specifically on BigQuery, it is a matter of hours to get the integration with Google AdWords, Google Analytics and DoubleClick Campaign Manager up and running.</p>
<p>When it comes to other marketing platforms (such as Bing, Facebook, Criteo, and the likes) you can leverage freemium services such as <a href="https://www.stitchdata.com/">Stitch</a>, etc. ‚Äî simply search for ‚ÄúYYY-BigQuery integration‚Äù when in doubt. Another option is to use the super-powerful <a href="https://supermetrics.com/?idev_id=1543">Supermetrics</a>, dump the data into a Google Sheet and linking it to your DWH (most likely a cheaper solution, but you might run into a scalability issues when your data grows).</p>
<p>If you use Salesforce as your CRM system, you can also use <a href="https://developer.salesforce.com/blogs/2018/08/integrate-google-bigquery-with-salesforce">pre-defined solutions</a> for integration ‚Äî if you don‚Äôt use Salesforce or another mainstream CRM solution, you might need to go back to ODBC connections :(</p>
<h2 id="transform-the-data">Transform the data</h2>
<p>Transforming data is probably the toughest of the three steps. In complex environments this might mean managing workflows of hundreds of steps.</p>
<p>A lot of the data visualisation tools offer visual modules for data preparation, such as Tableau Prep and Alterix. They tend to be expensive and have a moderate learning curve.</p>
<p>Internally we decided to build our workflows inside BigQuery with SQL. This decision was highly enabled by having prior SQL experience within the team, therefore the learning curve was minimised. Even though BigQuery is still a relatively immature tool, it provides mechanisms such as Scheduled Queries to automate the workflows created in SQL. Another plus of this approach is having the Load part of ETL done right away, as the prepared tables stay within the DWH/BigQuery.</p>
<h2 id="load-and-visualize-the-data">Load and Visualize the data</h2>
<p>Hopefully you agree with me on this: now the fun part begins! After loading your data onto the DWH (which hopefully was the easiest part of you went for a cloud solution), it‚Äôs time to visualise the data and take insights from it.</p>
<p>Some data warehouse solutions have basic visualisation capabilities, but in modern business I would advise to go to a more advanced tool. At CompareEuropeGroup we analysed several tools and ended up deciding between Looker and Tableau: i) both have very advanced data analysis capabilities; ii) both integrate beautifully with BigQuery; iii) both have incredible online communities and learning centres.</p>
<p>The final decision was in favour of Tableau: at $500/year each Explorer license, the economics of scaling become much simpler, versus the high fixed price ($3000/month) that Looker charges.</p>
<h2 id="now-what">Now what?</h2>
<p>With so much data and so easily accessible, the challenge will be to know how to use to its full potential. As an organisation, I believe the next big thing will be to transform the mindset of everyone to leverage the pot of gold they have in-house.</p>
<p>Continuous training, frequent communication on DWH updates and senior management buy-in will be required to make use of such a powerful asset.</p>
<p>I will leave you with a word of encouragement on this necessary road to the success of your company. It will be different in 3 months :)</p> </div>  </div>  </div>  </div> <div class="mx-auto w-full max-w-screen-lg px-4 py-6">  <footer class="text-center">
¬© 2024 - Ricardo Batista
</footer>  </div> </body></html>